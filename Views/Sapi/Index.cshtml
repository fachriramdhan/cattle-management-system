@model IEnumerable<SimSapi.Models.Sapi>

@{
    ViewData["Title"] = "Kelola Sapi";
}

<div class="space-y-6">

    <!-- ================= HEADER & FILTER ================= -->
<div class="relative bg-slate-900 border border-slate-800 rounded-2xl p-6 shadow space-y-5 overflow-hidden">

    <!-- ================= ICON SAPI (KIRI) ================= -->
    <i class="fas fa-cow absolute left-6 top-1/2 -translate-y-1/2
              text-[200px] text-emerald-500/10
              pointer-events-none select-none"></i>

    <!-- ================= CONTENT ================= -->
    <div class="relative flex flex-col md:flex-row md:items-center md:justify-between gap-4">

        <div class="pl-2 md:pl-20">
            <h2 class="text-xl font-bold text-white">
                Daftar Sapi
            </h2>
            <p class="text-slate-400 text-sm mt-1">
                Kelola data sapi berdasarkan status dan jenis
            </p>
        </div>

        <a asp-action="Create"
           class="flex items-center gap-2 bg-sky-500/10 text-sky-400
                  px-5 py-2 rounded-xl hover:bg-sky-500/20 transition">
            <i class="fas fa-plus"></i>
            Tambah Sapi
        </a>
    </div>

    <!-- ================= FILTER ================= -->
    <form method="get"
          class="relative grid grid-cols-1 md:grid-cols-4 gap-3">

        <input type="text"
               name="search"
               value="@ViewData["Search"]"
               placeholder="Cari kode / nama sapi..."
               class="bg-slate-950 border border-slate-800 text-slate-200 rounded-xl px-4 py-2
                      focus:outline-none focus:ring-2 focus:ring-sky-500" />

        <select name="jenisFilter"
                class="bg-slate-950 border border-slate-800 text-slate-200 rounded-xl px-4 py-2">
            <option value="">Semua Jenis</option>
            <option value="Jantan" selected="@(ViewData["JenisFilter"]?.ToString() == "Jantan")">Jantan</option>
            <option value="Betina" selected="@(ViewData["JenisFilter"]?.ToString() == "Betina")">Betina</option>
        </select>

        <select name="statusFilter"
                class="bg-slate-950 border border-slate-800 text-slate-200 rounded-xl px-4 py-2">
            <option value="">Semua Status</option>
            <option value="Aktif" selected="@(ViewData["StatusFilter"]?.ToString() == "Aktif")">Aktif</option>
            <option value="Dijual" selected="@(ViewData["StatusFilter"]?.ToString() == "Dijual")">Dijual</option>
            <option value="Mati" selected="@(ViewData["StatusFilter"]?.ToString() == "Mati")">Mati</option>
        </select>

        <button type="submit"
                class="bg-slate-800 hover:bg-slate-700 text-white
                       rounded-xl flex items-center justify-center gap-2 transition">
            <i class="fas fa-search"></i>
            Filter
        </button>
    </form>
</div>


    <!-- ================= TABLE ================= -->
    <div class="bg-slate-900 border border-slate-800 rounded-2xl shadow overflow-hidden">

        <div class="overflow-x-auto">
            <table class="w-full text-sm">

                <thead class="bg-slate-950 text-slate-400 uppercase text-xs">
                    <tr>
                        <th class="px-6 py-4 text-left">Kode</th>
                        <th class="px-6 py-4 text-left">Nama</th>
                        <th class="px-6 py-4 text-left">Jenis</th>
                        <th class="px-6 py-4 text-left">Tanggal Lahir</th>
                        <th class="px-6 py-4 text-left">Status</th>
                        <th class="px-6 py-4 text-left">Aksi</th>
                    </tr>
                </thead>

                <tbody class="divide-y divide-slate-800">

                @if (Model.Any())
                {
                    @foreach (var item in Model)
                    {
                        <tr class="hover:bg-slate-950 transition">
                            <td class="px-6 py-4 text-white font-medium">
                                @item.KodeSapi
                            </td>

                            <td class="px-6 py-4 text-slate-200">
                                @item.NamaSapi
                            </td>

                            <td class="px-6 py-4">
                                <span class="px-2 py-1 text-xs rounded-lg
                                    @(item.JenisKelamin == SimSapi.Models.JenisKelamin.Jantan
                                        ? "bg-sky-500/10 text-sky-400"
                                        : "bg-pink-500/10 text-pink-400")">
                                    @item.JenisKelamin
                                </span>
                            </td>

                            <td class="px-6 py-4 text-slate-300">
                                @item.TanggalLahir.ToString("dd/MM/yyyy")
                            </td>

                            <td class="px-6 py-4">
                                <span class="px-2 py-1 text-xs rounded-lg
                                    @(item.StatusSapi == "Aktif"
                                        ? "bg-emerald-500/10 text-emerald-400"
                                        : item.StatusSapi == "Dijual"
                                            ? "bg-amber-500/10 text-amber-400"
                                            : "bg-red-500/10 text-red-400")">
                                    @item.StatusSapi
                                </span>
                            </td>

                            <td class="px-6 py-4 flex gap-4">
                                <a asp-action="Edit"
                                   asp-route-id="@item.Id"
                                   class="text-sky-400 hover:text-sky-300 transition">
                                    <i class="fas fa-edit"></i>
                                </a>

                                <button onclick="confirmDelete(@item.Id)"
                                        class="text-red-400 hover:text-red-300 transition">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="6" class="py-16 text-center text-slate-500">
                            <i class="fas fa-inbox text-4xl mb-3 block"></i>
                            Tidak ada data sapi
                        </td>
                    </tr>
                }

                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- ================= DELETE FORM ================= -->
<form id="deleteForm" method="post" class="hidden">
    @Html.AntiForgeryToken()
</form>

@section Scripts {
<script>
    function confirmDelete(id) {
        Swal.fire({
            title: 'Hapus Data?',
            text: 'Data yang dihapus tidak dapat dikembalikan!',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#dc2626',
            cancelButtonColor: '#334155',
            confirmButtonText: 'Ya, Hapus!',
            cancelButtonText: 'Batal'
        }).then((result) => {
            if (result.isConfirmed) {
                const form = document.getElementById('deleteForm');
                form.action = '/Sapi/Delete/' + id;
                form.submit();
            }
        });
    }
</script>
}
